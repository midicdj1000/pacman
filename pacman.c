
//#include<stdio.h>

#include<stdlib.h>
#include <string.h>
#include <conio.h>
//#include <string.h>
//#include <c64.h>
#include <peekpoke.h>
//#include <cbm.h>
//#include <time.h>


static char mapData[1000] = {
	0x41, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42,
	0x42, 0x50, 0x52, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42,
	0x42, 0x42, 0x42, 0x4A, 0x20, 0x31, 0x15, 0x10, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x43, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x40, 0x40, 0x40, 0x54, 0x53, 0x40, 0x40, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x49, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x43, 0x51, 0x4D, 0x4E,
	0x4E, 0x4F, 0x40, 0x4D, 0x4E, 0x4E, 0x4E, 0x4F, 0x40, 0x55, 0x56, 0x40,
	0x4D, 0x4E, 0x4E, 0x4E, 0x4F, 0x40, 0x4D, 0x4E, 0x4E, 0x4F, 0x51, 0x49,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x43, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x40, 0x49, 0x20, 0x08, 0x09, 0x20, 0x13, 0x03, 0x0F, 0x12,
	0x05, 0x20, 0x20, 0x20, 0x43, 0x40, 0x4D, 0x4E, 0x4E, 0x4F, 0x40, 0x5B,
	0x5A, 0x40, 0x4D, 0x4E, 0x4E, 0x58, 0x57, 0x4E, 0x4E, 0x4F, 0x40, 0x5B,
	0x5A, 0x40, 0x4D, 0x4E, 0x4E, 0x4F, 0x40, 0x49, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x43, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x40, 0x54, 0x53, 0x40, 0x40, 0x40, 0x20, 0x54, 0x53, 0x20,
	0x40, 0x40, 0x40, 0x54, 0x53, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x49,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x44, 0x45, 0x45, 0x45, 0x45, 0x46, 0x40, 0x54, 0x5C, 0x4E, 0x4E, 0x4F,
	0x20, 0x55, 0x56, 0x20, 0x4D, 0x4E, 0x4E, 0x5D, 0x53, 0x40, 0x4B, 0x45,
	0x45, 0x45, 0x45, 0x48, 0x20, 0x6B, 0x68, 0x20, 0x6B, 0x68, 0x20, 0x6B,
	0x68, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x43, 0x40, 0x54,
	0x53, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x54,
	0x53, 0x40, 0x49, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x6A, 0x69, 0x20,
	0x6A, 0x69, 0x20, 0x6A, 0x69, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x43, 0x40, 0x54, 0x53, 0x20, 0x65, 0x4E, 0x4F, 0x20, 0x20, 0x4D,
	0x4E, 0x66, 0x20, 0x54, 0x53, 0x40, 0x49, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x42, 0x42, 0x42, 0x42, 0x42, 0x47, 0x40, 0x55, 0x56, 0x20, 0x62, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x62, 0x20, 0x55, 0x56, 0x40, 0x4C, 0x42,
	0x42, 0x42, 0x42, 0x42, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x40, 0x20,
	0x20, 0x20, 0x62, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x62, 0x20, 0x20,
	0x20, 0x40, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x45, 0x45, 0x45, 0x45,
	0x45, 0x46, 0x40, 0x5B, 0x5A, 0x20, 0x62, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x62, 0x20, 0x5B, 0x5A, 0x40, 0x4B, 0x45, 0x45, 0x45, 0x45, 0x45,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x43, 0x40, 0x54, 0x53, 0x20, 0x63, 0x4E,
	0x4E, 0x4E, 0x4E, 0x4E, 0x4E, 0x64, 0x20, 0x54, 0x53, 0x40, 0x49, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x43, 0x40, 0x54,
	0x53, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x54,
	0x53, 0x40, 0x49, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x41, 0x42, 0x42, 0x42,
	0x42, 0x47, 0x40, 0x55, 0x56, 0x20, 0x4D, 0x4E, 0x4E, 0x58, 0x57, 0x4E,
	0x4E, 0x4F, 0x20, 0x55, 0x56, 0x40, 0x4C, 0x42, 0x42, 0x42, 0x42, 0x4A,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x43, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
	0x40, 0x54, 0x53, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x40, 0x49, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x43, 0x40, 0x4D, 0x4E, 0x58, 0x5A, 0x40, 0x4D,
	0x4E, 0x4E, 0x4E, 0x4F, 0x40, 0x55, 0x56, 0x40, 0x4D, 0x4E, 0x4E, 0x4E,
	0x4F, 0x40, 0x5B, 0x57, 0x4E, 0x4F, 0x40, 0x49, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x43, 0x40, 0x40, 0x40,
	0x54, 0x53, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x20, 0x20, 0x40,
	0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x54, 0x53, 0x40, 0x40, 0x40, 0x49,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x5F, 0x4E, 0x4F, 0x40, 0x55, 0x56, 0x40, 0x5B, 0x5A, 0x40, 0x4D, 0x4E,
	0x4E, 0x58, 0x57, 0x4E, 0x4E, 0x4F, 0x40, 0x5B, 0x5A, 0x40, 0x55, 0x56,
	0x40, 0x4D, 0x4E, 0x5E, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x43, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x54,
	0x53, 0x40, 0x40, 0x40, 0x40, 0x54, 0x53, 0x40, 0x40, 0x40, 0x40, 0x54,
	0x53, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x49, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x43, 0x51, 0x4D, 0x4E,
	0x4E, 0x4E, 0x4E, 0x61, 0x60, 0x4E, 0x4E, 0x4F, 0x40, 0x55, 0x56, 0x40,
	0x4D, 0x4E, 0x4E, 0x61, 0x60, 0x4E, 0x4E, 0x4E, 0x4E, 0x4F, 0x51, 0x49,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x43, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40,
	0x40, 0x40, 0x40, 0x49, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x44, 0x45, 0x45, 0x45, 0x45, 0x45, 0x45, 0x45,
	0x45, 0x45, 0x45, 0x45, 0x45, 0x45, 0x45, 0x45, 0x45, 0x45, 0x45, 0x45,
	0x45, 0x45, 0x45, 0x45, 0x45, 0x45, 0x45, 0x48, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
	0x20, 0x20, 0x20, 0x20
};

static char charData[1024] = {
	0x3C, 0x66, 0x6E, 0x6E, 0x60, 0x62, 0x3C, 0x00, 0x38, 0x6C, 0xC6, 0xC6,
	0xFE, 0xC6, 0xC6, 0x00, 0xFC, 0xC6, 0xC6, 0xFC, 0xC6, 0xC6, 0xFC, 0x00,
	0x3C, 0x66, 0xC0, 0xC0, 0xC0, 0x66, 0x3C, 0x00, 0xF8, 0xCC, 0xC6, 0xC6,
	0xC6, 0xCC, 0xF8, 0x00, 0xFE, 0xC0, 0xC0, 0xF8, 0xC0, 0xC0, 0xFE, 0x00,
	0xFE, 0xC0, 0xC0, 0xF8, 0xC0, 0xC0, 0xC0, 0x00, 0x3E, 0x60, 0xC0, 0xCE,
	0xC6, 0x66, 0x3E, 0x00, 0xC6, 0xC6, 0xC6, 0xFE, 0xC6, 0xC6, 0xC6, 0x00,
	0xFC, 0x30, 0x30, 0x30, 0x30, 0x30, 0xFC, 0x00, 0x06, 0x06, 0x06, 0x06,
	0x06, 0xC6, 0x7C, 0x00, 0xC6, 0xCC, 0xD8, 0xF0, 0xF8, 0xDC, 0xCE, 0x00,
	0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xFC, 0x00, 0xC6, 0xEE, 0xFE, 0xD6,
	0xC6, 0xC6, 0xC6, 0x00, 0xC6, 0xE6, 0xF6, 0xFE, 0xDE, 0xCE, 0xC6, 0x00,
	0x7C, 0xC6, 0xC6, 0xC6, 0xC6, 0xC6, 0x7C, 0x00, 0xFC, 0xC6, 0xC6, 0xC6,
	0xFC, 0xC0, 0xC0, 0x00, 0x7C, 0xC6, 0xC6, 0xC6, 0xDE, 0xCC, 0x7A, 0x00,
	0xFC, 0xC6, 0xC6, 0xCE, 0xF8, 0xEC, 0xE6, 0x00, 0x7C, 0xC6, 0xC0, 0x7C,
	0x06, 0xC6, 0x7C, 0x00, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00,
	0xC6, 0xC6, 0xC6, 0xC6, 0xC6, 0xC6, 0x7C, 0x00, 0xC6, 0xC6, 0xC6, 0xEE,
	0x7C, 0x38, 0x10, 0x00, 0xC6, 0xC6, 0xC6, 0xD6, 0xFE, 0xEE, 0xC6, 0x00,
	0xC6, 0xEE, 0x7C, 0x38, 0x7C, 0xEE, 0xC6, 0x00, 0x66, 0x66, 0x66, 0x3C,
	0x18, 0x18, 0x18, 0x00, 0xFE, 0x0E, 0x1C, 0x38, 0x70, 0xE0, 0xFE, 0x00,
	0x3C, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3C, 0x00, 0x0C, 0x12, 0x30, 0x7C,
	0x30, 0x62, 0xFC, 0x00, 0x3C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x3C, 0x00,
	0x00, 0x18, 0x3C, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x00, 0x10, 0x30, 0x7F,
	0x7F, 0x30, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x18, 0x00, 0x66, 0x66, 0x66, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x66, 0x66, 0xFF, 0x66, 0xFF, 0x66, 0x66, 0x00,
	0x18, 0x3E, 0x60, 0x3C, 0x06, 0x7C, 0x18, 0x00, 0x62, 0x66, 0x0C, 0x18,
	0x30, 0x66, 0x46, 0x00, 0x3C, 0x66, 0x3C, 0x38, 0x67, 0x66, 0x3F, 0x00,
	0x06, 0x0C, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x18, 0x30, 0x30,
	0x30, 0x18, 0x0C, 0x00, 0x30, 0x18, 0x0C, 0x0C, 0x0C, 0x18, 0x30, 0x00,
	0x00, 0x66, 0x3C, 0xFF, 0x3C, 0x66, 0x00, 0x00, 0x00, 0x18, 0x18, 0x7E,
	0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x30,
	0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x18, 0x18, 0x00, 0x00, 0x03, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x00,
	0x38, 0x4C, 0xC6, 0xC6, 0xC6, 0x64, 0x38, 0x00, 0x18, 0x18, 0x38, 0x18,
	0x18, 0x18, 0x7E, 0x00, 0x3C, 0xC6, 0x06, 0x0C, 0x30, 0xE0, 0xFE, 0x00,
	0x7E, 0x0C, 0x18, 0x3C, 0x06, 0xC6, 0x7C, 0x00, 0x1C, 0x2C, 0x4C, 0xCC,
	0xFE, 0x0C, 0x0C, 0x00, 0xFE, 0xC0, 0xFC, 0x06, 0x06, 0xC6, 0x7C, 0x00,
	0x3C, 0x60, 0xC0, 0xFC, 0xC6, 0xC6, 0x7C, 0x00, 0xFE, 0xC6, 0x0C, 0x18,
	0x18, 0x18, 0x18, 0x00, 0x7C, 0xC2, 0xE2, 0x7C, 0x8E, 0x86, 0x7C, 0x00,
	0x7C, 0xC6, 0xC6, 0x7E, 0x06, 0x0C, 0x7C, 0x00, 0x00, 0x00, 0x18, 0x00,
	0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x18, 0x18, 0x30,
	0x0E, 0x18, 0x30, 0x60, 0x30, 0x18, 0x0E, 0x00, 0x00, 0x00, 0x7E, 0x00,
	0x7E, 0x00, 0x00, 0x00, 0x70, 0x18, 0x0C, 0x06, 0x0C, 0x18, 0x70, 0x00,
	0x3C, 0x66, 0x06, 0x0C, 0x18, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x18,
	0x18, 0x00, 0x00, 0x00, 0x7F, 0xFF, 0xC0, 0xC0, 0xC7, 0xCF, 0xCC, 0xCC,
	0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xCC, 0xCC, 0xCC, 0xCC,
	0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0xCC, 0xCF, 0xC7, 0xC0, 0xC0, 0xFF, 0x7F,
	0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xF8, 0xFC,
	0x0C, 0x0C, 0x8C, 0xCC, 0xCC, 0x8C, 0x0C, 0x0C, 0xFC, 0xF8, 0x00, 0x00,
	0x33, 0x33, 0xF3, 0xE3, 0x03, 0x03, 0xFF, 0xFE, 0x33, 0x33, 0x33, 0x33,
	0x33, 0x33, 0x33, 0x33, 0xFE, 0xFF, 0x03, 0x03, 0xE3, 0xF3, 0x33, 0x33,
	0x00, 0x00, 0x1F, 0x3F, 0x30, 0x30, 0x31, 0x33, 0x33, 0x31, 0x30, 0x30,
	0x3F, 0x1F, 0x00, 0x00, 0x00, 0x3F, 0x7F, 0x60, 0x60, 0x7F, 0x3F, 0x00,
	0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFC, 0xFE, 0x06,
	0x06, 0xFE, 0xFC, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xE0, 0xF0, 0x30, 0x30,
	0x00, 0x3C, 0x7E, 0x7E, 0x7E, 0x7E, 0x3C, 0x00, 0xFF, 0xFF, 0x00, 0x00,
	0x07, 0x0F, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C,
	0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
	0x3F, 0x1F, 0x00, 0x00, 0x0C, 0x0C, 0x0C, 0x0C, 0xFC, 0xF8, 0x00, 0x00,
	0x00, 0xFF, 0xFF, 0x00, 0x00, 0x07, 0x0F, 0x0C, 0x00, 0xFF, 0xFF, 0x00,
	0x00, 0xE0, 0xF0, 0x30, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06,
	0x00, 0xF8, 0xFC, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x00, 0x1F, 0x3F, 0x30,
	0x30, 0x30, 0x30, 0x30, 0x0C, 0x0F, 0x07, 0x00, 0x00, 0x07, 0x0F, 0x0C,
	0x30, 0xF0, 0xE0, 0x00, 0x00, 0xE0, 0xF0, 0x30, 0x33, 0xF3, 0xE3, 0x03,
	0x03, 0xE3, 0xF3, 0x33, 0xCC, 0xCF, 0xC7, 0xC0, 0xC0, 0xC7, 0xCF, 0xCC,
	0x0C, 0x0F, 0x07, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x30, 0xF0, 0xE0, 0x00,
	0x00, 0xFF, 0xFF, 0x00, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66,
	0x66, 0x67, 0x63, 0x60, 0x60, 0x7F, 0x3F, 0x00, 0x66, 0xE6, 0xC6, 0x06,
	0x06, 0xFE, 0xFC, 0x00, 0x00, 0x3F, 0x7F, 0x60, 0x60, 0x63, 0x67, 0x66,
	0x00, 0xFC, 0xFE, 0x06, 0x06, 0xC6, 0xE6, 0x66, 0x03, 0x03, 0x03, 0x03,
	0x03, 0x03, 0x03, 0x03, 0xC0, 0xF0, 0xF8, 0xFC, 0xFE, 0xFE, 0xFF, 0xFF,
	0xFF, 0xFF, 0xFE, 0xFE, 0xFC, 0xF8, 0xF0, 0xC0, 0x00, 0x03, 0x0F, 0x1F,
	0x3F, 0x1F, 0x0F, 0x03, 0x03, 0x0F, 0x1F, 0x3F, 0x1F, 0x07, 0x03, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x0F, 0x0F, 0x0F, 0x0F, 0x18, 0x18, 0x18, 0x1F,
	0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0xF8, 0x18, 0x18, 0x18,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x1F,
	0x1F, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0xFF, 0xFF, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0xFF, 0xFF, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0xF8,
	0xF8, 0x18, 0x18, 0x18, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0,
	0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0x07, 0x07, 0x07, 0x07,
	0x07, 0x07, 0x07, 0x07, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xFF, 0xFF, 0xFF, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0xFF, 0xFF,
	0x00, 0x00, 0x00, 0x00, 0xF0, 0xF0, 0xF0, 0xF0, 0x0F, 0x0F, 0x0F, 0x0F,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE7, 0x91, 0xE1, 0x81, 0x81,
	0x00, 0x00, 0x00, 0xCF, 0x10, 0x0E, 0x01, 0x1E, 0xF0, 0xF0, 0xF0, 0xF0,
	0x0F, 0x0F, 0x0F, 0x0F
};

//	0x00, 0x08, 0x06,
static char spriteData[2176] = {
 0x0F, 0x80, 0x00, 0x3F, 0xE0, 0x00, 0x7F, 0xF0, 0x00,
	0x7F, 0xF0, 0x00, 0xFF, 0xF8, 0x00, 0xFF, 0xF8, 0x00, 0xFF, 0xF8, 0x00,
	0xFF, 0xF8, 0x00, 0xFF, 0xF8, 0x00, 0x7F, 0xF0, 0x00, 0x7F, 0xF0, 0x00,
	0x3F, 0xE0, 0x00, 0x0F, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0F, 0x80, 0x00, 0x3F, 0xE0,
	0x00, 0x7F, 0xF0, 0x00, 0x7F, 0xF0, 0x00, 0x1F, 0xF8, 0x00, 0x01, 0xF8,
	0x00, 0x00, 0xF8, 0x00, 0x01, 0xF8, 0x00, 0x1F, 0xF8, 0x00, 0x7F, 0xF0,
	0x00, 0x7F, 0xF0, 0x00, 0x3F, 0xE0, 0x00, 0x0F, 0x80, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0F,
	0x80, 0x00, 0x3F, 0xE0, 0x00, 0x1F, 0xF0, 0x00, 0x07, 0xF0, 0x00, 0x03,
	0xF8, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x78, 0x00, 0x00, 0xF8, 0x00, 0x03,
	0xF8, 0x00, 0x07, 0xF0, 0x00, 0x1F, 0xF0, 0x00, 0x3F, 0xE0, 0x00, 0x0F,
	0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x07, 0x0F, 0x80, 0x00, 0x3F, 0xE0, 0x00, 0x7F, 0xF0, 0x00,
	0x7F, 0xF0, 0x00, 0xFF, 0xC0, 0x00, 0xFC, 0x00, 0x00, 0xF8, 0x00, 0x00,
	0xFC, 0x00, 0x00, 0xFF, 0xC0, 0x00, 0x7F, 0xF0, 0x00, 0x7F, 0xF0, 0x00,
	0x3F, 0xE0, 0x00, 0x0F, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0F, 0x80, 0x00, 0x3F, 0xE0,
	0x00, 0x7F, 0xC0, 0x00, 0x7F, 0x00, 0x00, 0xFE, 0x00, 0x00, 0xF8, 0x00,
	0x00, 0xF0, 0x00, 0x00, 0xFC, 0x00, 0x00, 0xFE, 0x00, 0x00, 0x7F, 0x00,
	0x00, 0x7F, 0xC0, 0x00, 0x3F, 0xE0, 0x00, 0x0F, 0x80, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00,
	0x00, 0x00, 0x30, 0x60, 0x00, 0x70, 0x70, 0x00, 0x78, 0xF0, 0x00, 0xF8,
	0xF8, 0x00, 0xF8, 0xF8, 0x00, 0xF8, 0xF8, 0x00, 0xF8, 0xF8, 0x00, 0xFD,
	0xF8, 0x00, 0x7F, 0xF0, 0x00, 0x7F, 0xF0, 0x00, 0x3F, 0xE0, 0x00, 0x0F,
	0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x10, 0x00,
	0x60, 0x30, 0x00, 0xE0, 0x38, 0x00, 0xE0, 0x38, 0x00, 0xF0, 0x78, 0x00,
	0xF8, 0xF8, 0x00, 0xF8, 0xF8, 0x00, 0x7D, 0xF0, 0x00, 0x7F, 0xF0, 0x00,
	0x3F, 0xE0, 0x00, 0x0F, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0F, 0x80, 0x00, 0x3F, 0xE0,
	0x00, 0x7F, 0xF0, 0x00, 0x7F, 0xF0, 0x00, 0xFD, 0xF8, 0x00, 0xF8, 0xF8,
	0x00, 0xF8, 0xF8, 0x00, 0xF0, 0x78, 0x00, 0xF0, 0x78, 0x00, 0x70, 0x70,
	0x00, 0x70, 0x70, 0x00, 0x30, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0F,
	0x80, 0x00, 0x3F, 0xE0, 0x00, 0x7F, 0xF0, 0x00, 0x7F, 0xF0, 0x00, 0xFD,
	0xF8, 0x00, 0xF8, 0xF8, 0x00, 0xF0, 0x78, 0x00, 0xF0, 0x78, 0x00, 0xE0,
	0x38, 0x00, 0x40, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x07, 0x07, 0x80, 0x00, 0x1F, 0xE0, 0x00, 0x3F, 0xF0, 0x00,
	0x7F, 0xF8, 0x00, 0x7F, 0xF8, 0x00, 0x7F, 0xF8, 0x00, 0xFF, 0xFC, 0x00,
	0xFF, 0xFC, 0x00, 0xFF, 0xFC, 0x00, 0xFF, 0xFC, 0x00, 0xFF, 0xFC, 0x00,
	0xFF, 0xFC, 0x00, 0xF7, 0xBC, 0x00, 0x63, 0x18, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0D, 0x07, 0x80, 0x00, 0x1F, 0xE0,
	0x00, 0x3F, 0xF0, 0x00, 0x7F, 0xF8, 0x00, 0x7F, 0xF8, 0x00, 0x7F, 0xF8,
	0x00, 0xFF, 0xFC, 0x00, 0xFF, 0xFC, 0x00, 0xFF, 0xFC, 0x00, 0xFF, 0xFC,
	0x00, 0xFF, 0xFC, 0x00, 0xFF, 0xFC, 0x00, 0xDC, 0xEC, 0x00, 0x8C, 0xC4,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0D, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0xE0, 0x00, 0x1C, 0xE0, 0x00, 0x1C,
	0xE0, 0x00, 0x1C, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x38, 0x00, 0x07, 0x38, 0x00,
	0x07, 0x38, 0x00, 0x07, 0x38, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x1C, 0xE0, 0x00, 0x1C, 0xE0, 0x00, 0x1C, 0xE0, 0x00, 0x1C, 0xE0,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x73, 0x80, 0x00, 0x73, 0x80, 0x00, 0x73, 0x80, 0x00, 0x73,
	0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x1C, 0xE0, 0x00, 0x1C, 0xE0, 0x00, 0x1C, 0xE0, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4C, 0xC8, 0x00, 0x33, 0x30, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0xE0, 0x00, 0x1C, 0xE0,
	0x00, 0x1C, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x33, 0x30,
	0x00, 0x4C, 0xC8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00,
	0x30, 0x00, 0x00, 0xF0, 0x00, 0x03, 0x40, 0x00, 0x04, 0x40, 0x00, 0x78,
	0x80, 0x00, 0xF9, 0x00, 0x00, 0xFB, 0xC0, 0x00, 0xB7, 0xE0, 0x00, 0xD7,
	0xE0, 0x00, 0x75, 0xE0, 0x00, 0x06, 0xE0, 0x00, 0x03, 0xC0, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x0A, 0x02, 0x00, 0x00, 0x74, 0xC0, 0x00, 0xF5, 0xE0, 0x00,
	0xFF, 0xF0, 0x00, 0xFF, 0xF0, 0x00, 0xFF, 0xF0, 0x00, 0xFF, 0xB0, 0x00,
	0xFF, 0xB0, 0x00, 0x7F, 0x60, 0x00, 0x7F, 0xE0, 0x00, 0x3B, 0xC0, 0x00,
	0x11, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x71, 0x8C, 0x00, 0x8A, 0x52,
	0x00, 0x0A, 0x52, 0x00, 0x12, 0x52, 0x00, 0x22, 0x52, 0x00, 0x42, 0x52,
	0x00, 0xF9, 0x8C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x11,
	0x8C, 0x00, 0x32, 0x52, 0x00, 0x52, 0x52, 0x00, 0x92, 0x52, 0x00, 0xFA,
	0x52, 0x00, 0x12, 0x52, 0x00, 0x11, 0x8C, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x03, 0x71, 0x8C, 0x00, 0x8A, 0x52, 0x00, 0x8A, 0x52, 0x00,
	0x72, 0x52, 0x00, 0x8A, 0x52, 0x00, 0x8A, 0x52, 0x00, 0x71, 0x8C, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x9C, 0xC6, 0x00, 0xA1, 0x29,
	0x00, 0xA1, 0x29, 0x00, 0xBD, 0x29, 0x00, 0xA5, 0x29, 0x00, 0xA5, 0x29,
	0x00, 0x98, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00,
	0x00, 0x00, 0x30, 0x60, 0x00, 0x70, 0x70, 0x00, 0x78, 0xF0, 0x00, 0xF8,
	0xF8, 0x00, 0xFD, 0xF8, 0x00, 0xFF, 0xF8, 0x00, 0xFF, 0xF8, 0x00, 0xFF,
	0xF8, 0x00, 0x7F, 0xF0, 0x00, 0x7F, 0xF0, 0x00, 0x3F, 0xE0, 0x00, 0x0F,
	0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x30, 0x00,
	0x70, 0x70, 0x00, 0xF8, 0xF8, 0x00, 0xF8, 0xF8, 0x00, 0xFD, 0xF8, 0x00,
	0xFF, 0xF8, 0x00, 0xFF, 0xF8, 0x00, 0x7F, 0xF0, 0x00, 0x7F, 0xF0, 0x00,
	0x3F, 0xE0, 0x00, 0x0F, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x18,
	0x00, 0xE0, 0x38, 0x00, 0xF0, 0x78, 0x00, 0xF8, 0xF8, 0x00, 0x7D, 0xF0,
	0x00, 0x7F, 0xF0, 0x00, 0x3F, 0xE0, 0x00, 0x0F, 0x80, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x18, 0x00, 0xE0, 0x38, 0x00, 0xF0,
	0x78, 0x00, 0x78, 0xF0, 0x00, 0x7F, 0xF0, 0x00, 0x3F, 0xE0, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0xF0, 0x00, 0x7F, 0xF0, 0x00,
	0x3D, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x0F, 0x80, 0x00, 0x7F, 0xF0,
	0x00, 0x7F, 0xF0, 0x00, 0x3D, 0xE0, 0x00, 0x30, 0x60, 0x00, 0x20, 0x20,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
	0x00, 0x00, 0x02, 0x00, 0x00, 0x07, 0x00, 0x00, 0x07, 0x00, 0x00, 0x0F,
	0x80, 0x00, 0x1F, 0xC0, 0x00, 0x1F, 0xC0, 0x00, 0x1D, 0xC0, 0x00, 0x30,
	0x60, 0x00, 0x20, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x02, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00,
	0x07, 0x00, 0x00, 0x07, 0x00, 0x00, 0x0F, 0x80, 0x00, 0x1F, 0xC0, 0x00,
	0x1F, 0xC0, 0x00, 0x1F, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00,
	0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00,
	0x00, 0x07, 0x00, 0x00, 0x07, 0x00, 0x00, 0x0F, 0x80, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02,
	0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02,
	0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02, 0x00, 0x00, 0x02,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x07, 0x20, 0x20, 0x00, 0x10, 0x40, 0x00, 0x88, 0x88, 0x00,
	0x40, 0x10, 0x00, 0x20, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x20, 0x20, 0x00, 0x40, 0x10, 0x00, 0x88, 0x88, 0x00,
	0x10, 0x40, 0x00, 0x20, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07
};

 unsigned char MAP[23][28] = {
	{160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160},//0
	{160,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,160,160,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,160},//1
	{160,47 ,160,160,160,160,46 ,160,160,160,160,160,46 ,160,160,46 ,160,160,160,160,160,46 ,160,160,160,160,47 ,160},//2
	{160,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,46 ,160},//3
	{160,46 ,160,160,160,160,46 ,160,160,46 ,160,160,160,160,160,160,160,160,46 ,160,160,46 ,160,160,160,160,46 ,160},//4
	{160,46 ,46 ,46 ,46 ,46 ,46 ,160,160,46 ,46 ,46 ,46 ,160,160,46 ,46 ,46 ,46 ,160,160,46 ,46 ,46 ,46 ,46 ,46 ,160},//5
	{160,160,160,160,160,160,46 ,160,160,160,160,160,  0,160,160,  0,160,160,160,160,160,46 ,160,160,160,160,160,160},//6
	{160,160,160,160,160,160,46 ,160,160,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,160,160,46 ,160,160,160,160,160,160},//7
	{160,160,160,160,160,160,46 ,160,160,  0,160,160,160,160,160,160,160,160,  0,160,160,46 ,160,160,160,160,160,160},//8
	{160,160,160,160,160,160,46 ,160,160,  0,160,160,160,160,160,160,160,160,  0,160,160,46 ,160,160,160,160,160,160},//9
	{  0,  0,  0,  0,  0,  0,46 ,  0,  0,  0,160,  0,  0,  0,  0,  0,  0,160,  0,  0,  0,46 ,  0,  0,  0,  0,  0,  0},//10
	{160,160,160,160,160,160,46 ,160,160,  0,160,160,160,160,160,160,160,160,  0,160,160,46 ,160,160,160,160,160,160},//11
	{160,160,160,160,160,160,46 ,160,160,  0,160,160,160,160,160,160,160,160,  0,160,160,46 ,160,160,160,160,160,160},//12
	{160,160,160,160,160,160,46 ,160,160,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,160,160,46 ,160,160,160,160,160,160},//13
	{160,160,160,160,160,160,46 ,160,160,  0,160,160,160,160,160,160,160,160,  0,160,160,46 ,160,160,160,160,160,160},//14
	{160, 46, 46, 46, 46, 46,46 , 46, 46, 46, 46, 46, 46,160,160, 46,46 ,46 , 46, 46, 46,46 , 46, 46, 46, 46, 46,160},//15
	{160, 46,160,160,160,160,46 ,160,160,160,160,160, 46,160,160, 46,160,160,160,160,160,46 ,160,160,160,160, 46,160},//17
	{160, 46, 46, 46,160,160,46 ,46 ,46 ,46 ,46 ,46 ,46 ,  0,  0, 46, 46, 46, 46, 46, 46,46 ,160,160, 46, 46, 46,160},//18
	{160,160,160, 46,160,160,46 ,160,160,46 ,160,160,160,160,160,160,160,160, 46,160,160,46 ,160,160, 46,160,160,160},//19
	{160, 46, 46, 46, 46, 46,46 ,160,160,46 ,46 ,46 ,46 ,160,160, 46, 46, 46, 46,160,160,46 ,46 ,46 ,46 ,46 ,46 ,160},//20
	{160, 47,160,160,160,160,160,160,160,160,160,160,46 ,160,160, 46,160,160,160,160,160,160,160,160,160,160,47 ,160},//21
	{160, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46, 46,46 ,160},//22
	{160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160,160}//23
};


short int Sch1low[34]={195,135,30,31,135,30,31,0,195,134,156,96,134,156, 96,0,195,135,30,31,135,30,31,0,239,31,96,96,181,30,30,49};
short int Sch1hi[34]={  16, 33,25,21, 33,25,21,0, 17, 35, 26,22, 35, 26, 22,0, 16, 33,25,21, 33,25,21,0, 19,21,22,22,23, 25,25,28};

short int Sch2low[34]={48,0,71,71,48,0,71,71,112,0,167,167,112,0,167,167,112,0,71,71,48,0,71,71,48,0,0,0,0,0,0,0,0,0};
short int Sch2hi[34]= { 4,0, 6, 6, 4,0, 6, 6,  4,0,  6,  6,  4,0,  6,  6,  4,0, 6, 6, 4,0, 6, 6, 4,0,0,0,0,0,0,0,0,0};
	unsigned int pacsprite=0;//6
short int level=0;	
unsigned int M=54272L;
	int colram=55336L;
	short int PX=13;
	short int PY=17;
	short int PGX=0;
	short int PGY=0;
	short int PXI=0;
	short int PYI=0;
	short int PINC=2;
	short int PDIR=3;
	short int GX[3]={14,13,15};
	short int GY[3]={7,10,10};
	short int GGX[3]={0,0,0};
	short int GGY[3]={0,0,0};
	short int GDIR[3]={1,3,1};
	short int GXI[3]={0,0,0};
	short int GYI[3]={0,0,0};
	short int GINC[3]={2,1,1};
	short int TGINC[3]={2,1,1};
    	short int TGMODE[3]={0,0,0};
	unsigned int spritebase=32768L;
	unsigned int spriteload=8192;
	unsigned int charload=12288;
	short int paclife=3;
	
	short int spritestart=64;
	short int EYEANIM[3]={0,0,0};
	short int GHOSTANIM[3]={0,0,0};
	short int PACANIM=0;
	short int FGX=130;
	short int FGY=130;
	short int fcherry=17;
	short int GMODE[3]={0,1,1};
	short int gtimer[3]={0,20,40};
	short int collide=0;
	short int pacmode=0;
	short int deadanim=0;
	short int V=53248L;
	short int ghostcol[3]={42,43,44};
	short int eyecol[3]={39,40,41};
	short int bonuscount=0;
    short int flashdot=0;
    unsigned int ghostsprite[3]={0,0,0};//3,4,5
    unsigned int eyesprite[3]={0,0,0};//0,1,2
    unsigned int fruitsprite=0;//7
    short int CBLACK=0;
    short int CWHITE=1;
    short int CBROWN=2;
    short int CCYAN=3;
    short int CPURP=4;
    short int CDGREEN=5;
    short int CDBLUE=6;
    short int CYELLOW=7;
    short int bcol=0;
    short int paccol=45;
    short int pacsx=12;
    short int pacsy=13;
    short int eyesx[3]={0,2,4};
    short int eyesy[3]={1,3,5};
    short int ghostsx[3]={6,8,10};
    short int ghostsy[3]={7,9,11};	
    short int ghostflash[2]={6,0};
	short int DOORS [5] = {0,0,0,0,0};
	short int GDOORS [5] = {0,0,0,0,0};
	short int GMOVE[4] = {0,0,0,0};
	short int PACFRAMES[5][4]={
	{0,0,0,0},
	{0,0,0,0},
	{0,0,0,0},
	{0,0,0,0},
	{0,0,0,0}
	};

void setupsprites(void){
  int dev=0;
     eyesprite[0]=spritebase+2040;
    eyesprite[1]=spritebase+2041;
    eyesprite[2]=spritebase+2042;
    ghostsprite[0]=spritebase+2043;
    ghostsprite[1]=spritebase+2044;
    ghostsprite[2]=spritebase+2045;	
    pacsprite=spritebase+2046;	
    fruitsprite=spritebase+2040+7;	

    spritestart=spriteload/64;

    fcherry=spritestart+19;

    EYEANIM[0]=spritestart+11;
    EYEANIM[1]=spritestart+11;
    EYEANIM[2]=spritestart+11;


    GHOSTANIM[0]=spritestart+9;
    GHOSTANIM[1]=spritestart+9;
    GHOSTANIM[2]=spritestart+9;	

    PACFRAMES[0][0]=spritestart;
    PACFRAMES[0][1]=spritestart+5;
    PACFRAMES[0][2]=spritestart+6;
    PACFRAMES[0][3]=spritestart+5;	
    PACFRAMES[1][0]=spritestart;	
    PACFRAMES[1][1]=spritestart+3;
    PACFRAMES[1][2]=spritestart+4;
    PACFRAMES[1][3]=spritestart+3;
    PACFRAMES[2][0]=spritestart;
    PACFRAMES[2][1]=spritestart+7;
    PACFRAMES[2][2]=spritestart+8;	
    PACFRAMES[2][3]=spritestart+7;	
    PACFRAMES[3][0]=spritestart;	
    PACFRAMES[3][1]=spritestart+1;
    PACFRAMES[3][2]=spritestart+2;	
    PACFRAMES[3][3]=spritestart+1;	
    deadanim=0; 
 
    for(dev=0;dev<2176;dev++){
    POKE(spritebase+spriteload+dev,spriteData[dev]);
  }



 
  // 68 = spritebase+1024 / 256 
  POKE(648,(spritebase+1024)/256);	// 
  
  
  deadanim=0;
pacmode=0;
PACANIM=0;
PX=13;
PY=17;
PGX=(PX*8)+20;
PGY=(PY*8)+56;
PDIR=3;
					//collide=PEEK(53278);
POKE(V+21,255);

	//PDIR=5;
POKE(pacsprite,PACFRAMES[PDIR][PACANIM]);
POKE(eyesprite[0],EYEANIM[0]);
POKE(ghostsprite[0],GHOSTANIM[0]);
POKE(eyesprite[1],EYEANIM[1]);
POKE(ghostsprite[1],GHOSTANIM[1]);
POKE(eyesprite[2],EYEANIM[2]);
POKE(ghostsprite[2],GHOSTANIM[2]);
//POKE(fruitsprite,fcherry);
POKE(V+paccol,CYELLOW);
POKE(V+eyecol[0],CWHITE);
POKE(V+ghostcol[0],3);
POKE(V+eyecol[1],CWHITE);
POKE(V+ghostcol[1],4);
POKE(V+eyecol[2],CWHITE);
POKE(V+ghostcol[2],5);
  
  
}  


void bigpause(void){
 int loop=0;
  int Xcount=0;
  for(Xcount=0;Xcount<24;Xcount++){
  POKE(M+Xcount,0);
} 
  while(loop<40){
  	while (VIC.rasterline < 255) ;
    loop++;
  }  
  
} 


void drawintro(void){
 unsigned int dev=0;
  long PO=0;
  char message[7][20]={
    {3,8,1,18,1,3,20,5,18,32,47,32,14,9,3,11,14,1,13,5},
    {45,32,19,9,4,32,32,32,32,32,32,32,1,32,32,32,32,32,32,32},
    {45,32,22,9,3,32,32,32,32,32,32,32,1,32,32,32,32,32,32,32},
    {45,32,3,9,1,32,32,32,32,32,32,32,1,32,32,32,32,32,32,32},   
    {32,32,32,32,32,32,64,32,49,48,32,125,126,32,32,32,32,32,32,32},   
    {32,32,32,32,32,32,81,32,53,48,32,125,126,32,32,32,32,32,32,32},  
    {32,32,12,5,5,32,19,13,9,20,8,32,32,50,48,50,48,32,32,32}
  };
  short int lin[7]={135,215,335,455,610,690,890};
  
       //(void) textcolor (1); 
  
  clrscr(); 
  
  	POKE(eyesprite[0],EYEANIM[0]);
	POKE(ghostsprite[0],GHOSTANIM[0]);
	POKE(eyesprite[1],EYEANIM[1]);
	POKE(ghostsprite[1],GHOSTANIM[1]);
	POKE(eyesprite[2],EYEANIM[2]);
	POKE(ghostsprite[2],GHOSTANIM[2]);


	//POKE(V+pacsx,50); // draw pacman
	//POKE(V+pacsy,50);
	POKE(V+eyesx[0],11); // draw pacman
	POKE(V+eyesy[0],110);
	POKE(V+ghostsx[0],10); // draw pacman
	POKE(V+ghostsy[0],110);	
	POKE(V+eyesx[1],10); // draw pacman
	POKE(V+eyesy[1],135);
	POKE(V+ghostsx[1],10); // draw pacman
	POKE(V+ghostsy[1],135);	
	POKE(V+eyesx[2],10); // draw pacman
	POKE(V+eyesy[2],85);
	POKE(V+ghostsx[2],10); // draw pacman
	POKE(V+ghostsy[2],85);
  POKE(V+21,255);
  
  
 
  for(dev=0;dev<10;dev++){
   
   PO=1024+spritebase+dev+lin[0];
    POKE(PO,message[0][dev]);
    PO=colram-40+dev+lin[0];
      POKE(PO,15);
    while (VIC.rasterline < 255) ;
  } 
   bigpause();

  for(dev=0;dev<10;dev++){
 	POKE(V+eyesx[2],10+dev*10); // draw pacman
	POKE(V+eyesy[2],85);
	POKE(V+ghostsx[2],10+dev*10); // draw pacman
	POKE(V+ghostsy[2],85); 
    POKE(1024+spritebase+dev+lin[1],message[1][dev]);
    PO=colram-40+dev+lin[1];
      POKE(PO,13); 
    while (VIC.rasterline < 255) ;
  } 
   bigpause();

  for(dev=0;dev<10;dev++){
     	POKE(V+eyesx[0],10+dev*10); // draw pacman
	POKE(V+eyesy[0],110);
	POKE(V+ghostsx[0],10+dev*10); // draw pacman
	POKE(V+ghostsy[0],110);	
        POKE(colram-40+dev+lin[2],3);     
    POKE(1024+spritebase+dev+lin[2],message[2][dev]);
      while (VIC.rasterline < 255) ;  
  }   
   bigpause();  
  for(dev=0;dev<10;dev++){
 	POKE(V+eyesx[1],10+dev*10); // draw pacman
	POKE(V+eyesy[1],135);
	POKE(V+ghostsx[1],10+dev*10); // draw pacman
	POKE(V+ghostsy[1],135);   
        POKE(colram-40+dev+lin[3],4);     
    POKE(1024+spritebase+dev+lin[3],message[3][dev]);
      while (VIC.rasterline < 255) ;  
  }   
   bigpause();   
  for(dev=0;dev<20;dev++){
          POKE(colram-40+dev+lin[4],15); 
    POKE(1024+spritebase+dev+lin[4],message[4][dev]);
      while (VIC.rasterline < 255) ;  
  }   
   bigpause();   
  for(dev=0;dev<20;dev++){
          POKE(colram-40+dev+lin[5],15); 
    POKE(1024+spritebase+dev+lin[5],message[5][dev]);
        while (VIC.rasterline < 255) ;
  }   
   bigpause();   
  for(dev=0;dev<20;dev++){
          POKE(colram-40+dev+lin[6],1); 
    POKE(1024+spritebase+dev+lin[6],message[6][dev]);
        while (VIC.rasterline < 255) ;
  }   
   bigpause();
   bigpause();
   bigpause();
   bigpause();  
   bigpause();
   bigpause();  
  POKE(V+21,0);
} 


void drawmap(void){
 unsigned int dev=0;
  (void) textcolor (14);  
  clrscr(); 



 for(dev=29;dev<39;dev++){
  POKE(colram+dev,1);   
  POKE(colram+dev+40,1); 
  POKE(colram+dev+120,1); 
  POKE(colram+dev+160,1);    
 }
  for(dev=0;dev<960;dev++){
    POKE(1024+spritebase+dev+40,mapData[dev]);
  } 

}  



void rasterWait(unsigned char line) {
  while (VIC.rasterline < line) ;
}


 


void printscore(int score,short int stat){
int a=0;
  int colpointer=0;
  int charpointer=0;  
char buffer[20];
itoa(score,buffer,10);
for(a=0;a<10;a++){ 
  charpointer=spritebase+1024+a+(stat*40)+29;
  //colpointer=colram+(2*40)+29+a;  
if(buffer[a]!=0) {
  POKE(charpointer,buffer[a]);
  //POKE(colpointer,3);
} else {
  POKE(charpointer,32);
}
  
}
}

void printstatus(short stat){
  short int count=0;
  int colpointer=0;
  int charpointer=0;
  char message[3][10]={
    {32,32,32,32,32,32,32,32,32,32},
    {7,5,20,32,18,5,1,4,25,33},
    {16,18,5,19,19,32,6,9,18,5}
  };
      for(count=0;count<10;count++){
	colpointer=colram+(13*40)+9+count;
        charpointer=spritebase+1024+(14*40)+9+count;
        if(stat==0){
	POKE(colpointer,0);
        } else {
	POKE(colpointer,2);          
        }  
        POKE(charpointer,message[stat][count]);
      }

}  

static void resetghost(void){
	//short int Xcount=0;
	
	GX[0]=14; //{14,13,15};
	GX[1]=13; //{14,13,15};
	GX[2]=15; //{14,13,15};
	
	GY[0]=7;//{7,10,10};
	GY[1]=10;//{7,10,10};
	GY[2]=10;//{7,10,10};	

	GDIR[0]=1;// {1,3,1};
	GDIR[1]=3;// {1,3,1};	
	GDIR[2]=1;// {1,3,1};	
	
	GXI[0]=0;
	GXI[1]=0;
	GXI[2]=0;	
	GYI[0]=0;
	GYI[1]=0;
	GYI[2]=0;
	
	GINC[0]=2;
	GINC[1]=1;
	GINC[2]=1;

	GMODE[0]=0;
	GMODE[1]=1;
	GMODE[2]=1;
	
	gtimer[0]=0;
	gtimer[1]=20;
	gtimer[2]=40;
	
	ghostcol[0]=42;
	ghostcol[1]=43;
	ghostcol[2]=44;
	
POKE(V+eyecol[0],1);
POKE(V+ghostcol[0],3);
POKE(V+eyecol[1],1);
POKE(V+ghostcol[1],4);
POKE(V+eyecol[2],1);
POKE(V+ghostcol[2],5);	

	GGX[0]=(GX[0]*8)+20; // draw ghost
	GGY[0]=(GY[0]*8)+56;
	GGX[1]=(GX[1]*8)+20; // draw ghost
	GGY[1]=(GY[1]*8)+56;
	GGX[2]=(GX[2]*8)+20; // draw ghost
	GGY[2]=(GY[2]*8)+56;
		

}	
	
static void drawdots(int col){

int colram=55336L;  
short Xcount=0;
short Ycount=0;

  for(Xcount=0;Xcount<23;Xcount++){
	  for(Ycount=0;Ycount<28;Ycount++){
		  if((MAP[Xcount][Ycount]!=160)&&(MAP[Xcount][Ycount]!=0)){
			  if (MAP[Xcount][Ycount]==99) MAP[Xcount][Ycount]=46;
			  if (MAP[Xcount][Ycount]==100) MAP[Xcount][Ycount]=47;			  
			  POKE(colram,col);
		  }
		  colram++;
	  }
	colram=colram+12;
  }
}  
	
	
static void drawlife(int lifes){
unsigned int colram=55336L;	
short int Xcount=0;
  switch (lifes){
    case 0:
      for(Xcount=35;Xcount<37;Xcount++){
        POKE(colram+240+Xcount,0);
        POKE(colram+280+Xcount,0);
      } 
      break;
    case 1:
      for(Xcount=32;Xcount<34;Xcount++){
        POKE(colram+240+Xcount,0);
        POKE(colram+280+Xcount,0);
      } 	
      break;
    case 2:
      for(Xcount=29;Xcount<31;Xcount++){
        POKE(colram+240+Xcount,0);
        POKE(colram+280+Xcount,0);
      } 	
      break;
    case 3:
      for(Xcount=29;Xcount<40;Xcount++){
        POKE(colram+240+Xcount,7);
        POKE(colram+280+Xcount,7);
      } 	
      break;
  }	


}	


static void stopmusic(void){
short int Xcount=0;
  for(Xcount=0;Xcount<24;Xcount++){
    POKE(M+Xcount,0);
  }   

}  



static void startmusic(void){
	short int Ycount=0;
	short int Xcount=0;
  unsigned int empty=0;
	

for(Xcount=0;Xcount<24;Xcount++){
  POKE(M+Xcount,0);
}  
POKE(54276L,65);// pulse wave ch1
POKE(54277L,58);// att / dec
POKE(54278L,6);// sus/release
POKE(54283L,65); // pulse ch1
POKE(54284L,58);  //att/dec
POKE(54285L,6); //sus
POKE(54290L,33);  //c3
POKE(54291L,58);
POKE(54292L,6);
POKE(54296L,15);
  

 

  for(Ycount=0;Ycount<33;Ycount++){

    if(Sch1low[Ycount]!=0){
      POKE(54276L,65);
      POKE(M+3,0);	// voice 1 pwn hi
      POKE(M+2,192);  // voice 1 pwn low
      POKE(M+6,240);  // voice 1 sr
      POKE(M+5,15);   // voice 1 ad           
      POKE(54272L,Sch1low[Ycount]);	
      POKE(54273L,Sch1hi[Ycount]);



    } else {
      POKE(54276L,64);           
    }
    if(Sch2low[Ycount]!=0){
      POKE(54283L,65);  
      POKE(54281L,	0);
      POKE(54282L,	3); 
      POKE(54284L,15);
      POKE(54285L,15);
      POKE(54279L,Sch2low[Ycount]);	
      POKE(54280L,Sch2hi[Ycount]);


    } else {
      POKE(54283L,64);           
    }  
    for(Xcount=0;Xcount<6;Xcount++){

      rasterWait(255);
    }
  }
  for(Xcount=0;Xcount<24;Xcount++){
  POKE(M+Xcount,0);
} 

	
}
	
	
unsigned int sqdist(int x1, int y1, int x2, int y2){
  int C=0;
  int temp=0;
  int sqr=0;
  C=((x1-x2)*(x1-x2))+((y1-y2)*(y1-y2));
  temp=1;
  sqr=1;
  while (sqr<=C){
    temp++;
    sqr=temp*temp;
  }
  C=temp-1;		
  return(C);



}
	

	
static void ghostmove(int TX,int TY,int GINDEX,int mmode)
{
    int C=0;
    int sqr=0;
    int temp=0;
    int tempg=5;
    int templ=999;
    int n=0;	


    GDOORS[0]=1;
    GDOORS[1]=1;
    GDOORS[2]=1;
    GDOORS[3]=1;
    GDOORS[4]=0;
    if (MAP[GY[GINDEX]-1][GX[GINDEX]]!=160){ // check exits at the location of the current ghost
      GDOORS[0]=1;
      GDOORS[4]+=1;
    }	
    if (MAP[GY[GINDEX]][GX[GINDEX]+1]!=160){
      GDOORS[1]=1;
      GDOORS[4]+=2;
    }
    if (MAP[GY[GINDEX]+1][GX[GINDEX]]!=160){
      GDOORS[2]=1;
      GDOORS[4]+=4;
    }
    if (MAP[GY[GINDEX]][GX[GINDEX]-1]!=160){
      GDOORS[3]=1;
      GDOORS[4]+=8;
    }
  
  
    if ((GXI[GINDEX]==0) && (GYI[GINDEX]==0)){ // is ghost at the start of a square

      GMOVE[0]=999;GMOVE[1]=999;GMOVE[2]=999;GMOVE[3]=999;				// set exits to 999
      GHOSTANIM[GINDEX]++;
      if (GHOSTANIM[GINDEX]>spritestart+10) GHOSTANIM[GINDEX]=spritestart+9;		// ghost animation

      if (GDIR[GINDEX]==0){   								// ghost facing up
        if (GDOORS[4]==5){
          GMOVE[2]=999;
          GMOVE[0]=0;
        }	
        if (GDOORS[4]==6){
          GMOVE[2]=999;
          GMOVE[1]=0;
        }	
        if (GDOORS[4]==12){
          GMOVE[2]=999;
          GMOVE[3]=0;
        }	
        if (GDOORS[4]==14){
          GMOVE[2]=999;
          GMOVE[3]=1;
          GMOVE[1]=1;
        }	
        if (GDOORS[4]==7) {
          GMOVE[2]=999;	
          GMOVE[0]=1;
          GMOVE[1]=1;
        }	
        if (GDOORS[4]==13){
          GMOVE[2]=999;				
          GMOVE[0]=1;
          GMOVE[3]=1;
        }	
        if (GDOORS[4]==15){ 
          GMOVE[2]=999;				
          GMOVE[0]=1;
          GMOVE[1]=1;
          GMOVE[3]=1;	
        }	
      }
      if (GDIR[GINDEX]==1){								// ghost facing right
        if (GDOORS[4]==10) {
          GMOVE[3]=999;
          GMOVE[1]=0;
        }	
        if (GDOORS[4]==12){
          GMOVE[3]=999;
          GMOVE[2]=0;
        }	
        if (GDOORS[4]==9){
          GMOVE[3]=999;
          GMOVE[0]=0;
        }	
        if (GDOORS[4]==11){
          GMOVE[3]=999;	
          GMOVE[0]=1;
          GMOVE[1]=1;
        }	
        if (GDOORS[4]==13){
          GMOVE[3]=999;
          GMOVE[0]=1;
          GMOVE[2]=1;				
        }	
        if (GDOORS[4]==15){
          GMOVE[3]=999;
          GMOVE[0]=1;
          GMOVE[1]=1;
          GMOVE[2]=1;	
        }	
        if (GDOORS[4]==14){
          GMOVE[3]=999;
          GMOVE[1]=1;
          GMOVE[2]=1;	
        }
        if(GDOORS[4]==8){
          GMOVE[3]=0;				
        }				

      }
      if (GDIR[GINDEX]==2){								// ghost facing down
        if (GDOORS[4]==9){
          GMOVE[0]=999;
          GMOVE[3]=0;
        }
        if (GDOORS[4]==3) {
          GMOVE[1]=0;
          GMOVE[0]=999;
        }	
        if (GDOORS[4]==11){
          GMOVE[0]=999;
          GMOVE[1]=1;
          GMOVE[3]=1;	
        }	
        if (GDOORS[4]==14){
          GMOVE[3]=999;
          GMOVE[1]=1;
          GMOVE[3]=1;
        }	
        if (GDOORS[4]==7){
          GMOVE[0]=999;	
          GMOVE[1]=1;
          GMOVE[2]=1;	
        }	
        if (GDOORS[4]==13){
          GMOVE[0]=999;
          GMOVE[2]=1;
          GMOVE[3]=1;	
        }	
        if (GDOORS[4]==15){
          GMOVE[0]=999;
          GMOVE[1]=1;
          GMOVE[2]=1;
          GMOVE[3]=1;	
        }
        if (GDOORS[4]==5){
          GMOVE[0]=999;
          GMOVE[2]=0;
        }			
      }
      if (GDIR[GINDEX]==3){								// ghost facing left
        if (GDOORS[4]==10){
          GMOVE[1]=999;
          GMOVE[3]=0;
        }	
        if (GDOORS[4]==6){
          GMOVE[1]=999;
          GMOVE[2]=0;
        }
        if (GDOORS[4]==3){
          GMOVE[1]=999;		
          GMOVE[0]=0;					
        }	
        if (GDOORS[4]==11){
          GMOVE[1]=999;
          GMOVE[0]=1;
          GMOVE[3]=1;	
        }	
        if (GDOORS[4]==14){
          GMOVE[1]=999;	
          GMOVE[2]=1;
          GMOVE[3]=1;
        }	
        if (GDOORS[4]==7){
          GMOVE[1]=999;
          GMOVE[2]=1;
          GMOVE[0]=1;	
        }	
        if (GDOORS[4]==15){
          GMOVE[1]=999;
          GMOVE[0]=1;
          GMOVE[2]=1;
          GMOVE[3]=1;	
        }
        if (GDOORS[4]==2){
          GMOVE[1]=0;
        }		
      }
      if (mmode==0){								// mode 0 = pythag
        if(GMOVE[0]==1) GMOVE[0]=sqdist(GX[GINDEX],GY[GINDEX]-1,TX,TY);
        if(GMOVE[1]==1) GMOVE[1]=sqdist(GX[GINDEX]+1,GY[GINDEX],TX,TY);
        if(GMOVE[2]==1) GMOVE[2]=sqdist(GX[GINDEX],GY[GINDEX]+1,TX,TY);
        if(GMOVE[3]==1) GMOVE[3]=sqdist(GX[GINDEX]-1,GY[GINDEX],TX,TY);
      }
      if (mmode==1){								// mode 1 = random (does nto work)
        srand(PEEK(1));
        if(GMOVE[0]==1) GMOVE[0]=(rand()% 997)+1;
        if(GMOVE[1]==1) GMOVE[1]=(rand()% 997)+1;
        if(GMOVE[2]==1) GMOVE[2]=(rand()% 997)+1;
        if(GMOVE[3]==1) GMOVE[3]=(rand()% 997)+1;
      }	
      templ=9999;
      tempg=5;
      for (n=0;n<4;n++){						// sort resuslts to find the shortest 
        if (GMOVE[n]<templ){
          templ=GMOVE[n];
          tempg=n;
        }	
      }
      GDIR[GINDEX]=tempg;
    }

  
    if(GMODE[GINDEX]==3){							// if ghost mode = 3 go home
      if((GX[GINDEX]==14)&&(GY[GINDEX]==7)){				// ghost lands on home door	
        GX[GINDEX]=14;
        GY[GINDEX]=10;
        GGX[GINDEX]=(GX[GINDEX]*8)+20; // draw ghost
        GGY[GINDEX]=(GY[GINDEX]*8)+56;					// set ghost location in home
        GMODE[GINDEX]=4;						// set ghost mode
        GDIR[GINDEX]=1;							// set ghost direction
        GINC[GINDEX]=1;					// set ghost speeD

        POKE(V+ghostcol[GINDEX],3+GINDEX);				// set ghost colour
        GXI[GINDEX]=0;							// set ghost offset indexz
        GYI[GINDEX]=0;
        switch(GINDEX){							// turn body back on
          case 0:
            POKE(53269L,PEEK(53269L)|8);
            break;
          case 1:
            POKE(53269L,PEEK(53269L)|16);
            break;
          case 2:
            POKE(53269L,PEEK(53269L)|32);					
            break;
        }	
      }		
    }
  if(GMODE[GINDEX]>3){
    GMODE[GINDEX]++;
    if(GMODE[GINDEX]==50){
      GMODE[GINDEX]=0;
      GINC[GINDEX]=TGINC[GINDEX];
      GDIR[GINDEX]=3;
      GX[GINDEX]=14;
      GY[GINDEX]=7;
      GGX[GINDEX]=(GX[GINDEX]*8)+20; // draw ghost
      GGY[GINDEX]=(GY[GINDEX]*8)+56;	
      GXI[GINDEX]=0;
      GYI[GINDEX]=0;			

    }  
  }  
    
    if (GDIR[GINDEX]==0){					// ghost facing up
      if (MAP[GY[GINDEX]-1][GX[GINDEX]]!=160){		// not a wall
        GYI[GINDEX]+=GINC[GINDEX];				// inc position offset
        GGY[GINDEX]-=GINC[GINDEX];				// dec Y drawing of sprite
        if (GYI[GINDEX]>7){					// if position offset > 7 sprite has moved cell
          GYI[GINDEX]=0;					// reset inc	
          GY[GINDEX]--;					// move cell up
          if(GMODE[GINDEX]!=2){				// animate eyes to direction
            EYEANIM[GINDEX]=spritestart+11;			
          } else {
            EYEANIM[GINDEX]=GHOSTANIM[GINDEX]+6;
          }		
        }	
      }
    }	
    if (GDIR[GINDEX]==1){
      if (MAP[GY[GINDEX]][GX[GINDEX]+1]!=160){
        GXI[GINDEX]+=GINC[GINDEX];
        GGX[GINDEX]+=GINC[GINDEX];
        if (GXI[GINDEX]>7){
          GXI[GINDEX]=0;
          GX[GINDEX]++;			
          if(GMODE[GINDEX]!=2){
            EYEANIM[GINDEX]=spritestart+12;			
          } else {
            EYEANIM[GINDEX]=GHOSTANIM[GINDEX]+6;
          }
        }		
      }
    }	
    if (GDIR[GINDEX]==2){
      if (MAP[GY[GINDEX]+1][GX[GINDEX]]!=160){
        GYI[GINDEX]+=GINC[GINDEX];
        GGY[GINDEX]+=GINC[GINDEX];
        if (GYI[GINDEX]>7){
          GYI[GINDEX]=0;
          GY[GINDEX]++;			
          if(GMODE[GINDEX]!=2){
            EYEANIM[GINDEX]=spritestart+13;			
          } else {
            EYEANIM[GINDEX]=GHOSTANIM[GINDEX]+6;
          }
        }		
      }
    }	
    if (GDIR[GINDEX]==3){
      if (MAP[GY[GINDEX]][GX[GINDEX]-1]!=160){
        GXI[GINDEX]+=GINC[GINDEX];
        GGX[GINDEX]-=GINC[GINDEX];
        if (GXI[GINDEX]>7){
          GXI[GINDEX]=0;
          GX[GINDEX]--;			
          if(GMODE[GINDEX]!=2){
            EYEANIM[GINDEX]=spritestart+14;			
          } else {
            EYEANIM[GINDEX]=GHOSTANIM[GINDEX]+6;
          }	
        }	
      }
    }
    if(GDIR[GINDEX]==1){								// if ghost goes in right tunnle
      if((GX[GINDEX]==27)&&(GY[GINDEX]==10)){
        GX[GINDEX]=1;
        GGX[GINDEX]=(GX[GINDEX]*8)+20;
        //PGY=(PY*8)+56;             
      }  
    }
    if(GDIR[GINDEX]==3){
      if((GX[GINDEX]==1)&&(GY[GINDEX]==10)){
        GX[GINDEX]=26;
        GGX[GINDEX]=(GX[GINDEX]*8)+20;
        //PGY=(PY*8)+56;              
      }  
    }  
		
	
}	
	

static void pacmove(void)
{
  if(pacmode==0){
    DOORS[0]=1;
    DOORS[1]=1;
    DOORS[2]=1;
    DOORS[3]=1;
    DOORS[4]=0;
    if (MAP[PY-1][PX]==160){
      DOORS[0]=0;
      DOORS[4]+=1;
    }	
    if (MAP[PY][PX+1]==160){
      DOORS[1]=0;
      DOORS[4]+=2;
    }	
    if (MAP[PY+1][PX]==160){
      DOORS[2]=0;
      DOORS[4]+=4;
    }	
    if (MAP[PY][PX-1]==160){
      DOORS[3]=0;	
      DOORS[4]+=8;
    }
    if (PDIR==0){
      if (DOORS[0]==1){
        PGY-=PINC;
        PYI+=PINC;

        if (PYI==8){
          PYI=0;
          PY--;
          //PDIR=5;
          PACANIM++;	
        }
      }	
    }
    if (PDIR==1){
      if (DOORS[1]==1){
        PGX+=PINC;
        PXI+=PINC;

        if (PXI==8){
          PXI=0;
          PX++;
          PACANIM++;			
        }
      }	
    }	
    if (PDIR==2){
      if (DOORS[2]==1){
        PGY+=PINC;
        PYI+=PINC;

        if (PYI==8){
          PYI=0;
          PY++;
          PACANIM++;				
        }
      }	
    }
    if (PDIR==3){
      if (DOORS[3]==1){
        PGX-=PINC;
        PXI+=PINC;
        if (PXI==8){
          PXI=0;
          PX--;
          PACANIM++;			
        }
      }	
    }
    if (PACANIM>3) PACANIM=0;
    if(PDIR==1){
      if((PX==27)&&(PY==10)){
        PX=1;
        PGX=(PX*8)+20;
        PGY=(PY*8)+56;             
      }  
    }
    if(PDIR==3){
      if((PX==1)&&(PY==10)){
        PX=27;
        PGX=(PX*8)+20;
        PGY=(PY*8)+56;              
      }  
    }          
  }
	
}

void ghostdead(int bon){
unsigned int death1[35]={2000,2266,2532,2798,3596,3862,4128,4394,4660,4926,5192,5458,5724,5990,6256,2718,2968,3518,3638,3808,4158,4728,4398,4478,4648,2718,2968,3518,3638,3808,4158,4728,4398,4478,4648};   
unsigned int N=2428;
short int T=0;
unsigned int FQ=0;
unsigned int HF=0;
unsigned int LF=0;  
  
  for(T=0;T<24;T++){
    POKE(M+T,0);
  } 
  //POKE(V+21,64);	  
  POKE(M+14,140);  // voice 3 frequancy
  POKE(M+18,16);  // voice 3 wave
  POKE(M+24,143); // set volume and turn off voice 3
  POKE(M+3,0);	// voice 1 pwn hi
  POKE(M+2,192);  // voice 1 pwn low
  POKE(M+6,240);  // voice 1 sr
  POKE(M+5,15);   // voice 1 ad
  POKE(M+4,65);   // voice 1 wave square  
  for(T=0;T<15;T++){
	//FQ=N+PEEK(M+27)*10; // peek voice 3 
	FQ=death1[T]+bon;
	HF=(FQ/256);
	LF=FQ-(HF*256);
	//death1[T]=FQ;
	POKE(M,LF);
	POKE(M+1,HF);
      	while (VIC.rasterline < 255) ;
	//waitvsync();
	//waitvsync();
	//waitvsync();  
  	//POKE(pacsprite,deadpac[T]);  
  } 
  for(T=0;T<24;T++){
    POKE(M+T,0);
  } 
  for (T=0;T<5;T++) 	while (VIC.rasterline < 255) ;
  
}  

void pacdead(void){
unsigned int death1[35]={6000,6200,5200,4800,4400,5200,5400,4400,4000,3600,4400,4800,3600,3200,2800,2718,2968,3518,3638,3808,4158,4728,4398,4478,4648,2718,2968,3518,3638,3808,4158,4728,4398,4478,4648};   
short int deadpac[15]={0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};
  //unsigned int M=54272L;
unsigned int N=2428;
short int T=0;
unsigned int FQ=0;
unsigned int HF=0;
unsigned int LF=0;
//clrscr();
//memset(M,0,24); // clear
  deadpac[0]=spritestart;
  deadpac[1]=spritestart;
  deadpac[2]=spritestart+23;
  deadpac[3]=spritestart+24;
  deadpac[4]=spritestart+25;
  deadpac[5]=spritestart+26;
  deadpac[6]=spritestart+27;
  deadpac[7]=spritestart+28;
  deadpac[8]=spritestart+29;
  deadpac[9]=spritestart+30;
  deadpac[10]=spritestart+31;
  deadpac[11]=spritestart+32;
  deadpac[12]=spritestart+33;  
  deadpac[13]=spritestart+32;
  deadpac[14]=spritestart+33;


  for(T=0;T<24;T++){
    POKE(M+T,0);
  } 
  POKE(V+21,64);	  
  POKE(M+14,140);  // voice 3 frequancy
  POKE(M+18,16);  // voice 3 wave
  POKE(M+24,143); // set volume and turn off voice 3
  POKE(M+3,0);	// voice 1 pwn hi
  POKE(M+2,192);  // voice 1 pwn low
  POKE(M+6,240);  // voice 1 sr
  POKE(M+5,15);   // voice 1 ad
  POKE(M+4,65);   // voice 1 wave square  
  for(T=0;T<15;T++){
	//FQ=N+PEEK(M+27)*10; // peek voice 3 
	FQ=death1[T];
	HF=(FQ/256);
	LF=FQ-(HF*256);
	//death1[T]=FQ;
	POKE(M,LF);
	POKE(M+1,HF);
	waitvsync();
	waitvsync();
	waitvsync();  
  	POKE(pacsprite,deadpac[T]);  
  }
 
  for(T=15;T<25;T++){
	//FQ=N+PEEK(M+27)*10; // peek voice 3 
	FQ=death1[T];
	HF=(FQ/256);
	LF=FQ-(HF*256);
	//store[T]=FQ;
	POKE(M,LF);
	POKE(M+1,HF);
	waitvsync();
  }
  for(T=15;T<25;T++){
	//FQ=N+PEEK(M+27)*10; // peek voice 3 
	FQ=death1[T];
	HF=(FQ/256);
	LF=FQ-(HF*256);
	//store[T]=FQ;
	POKE(M,LF);
	POKE(M+1,HF);
	waitvsync();
  } 
  for(T=0;T<24;T++){
    POKE(M+T,0);
  } 
  

  deadanim=0;
  pacmode=0;
  PACANIM=0;
  PX=13;
  PY=17;
  PGX=(PX*8)+20;
  PGY=(PY*8)+56;
  PDIR=3;
  PXI=0;
  PYI=0;
  paclife--;
  drawlife(paclife);	
  resetghost();					
  POKE(V+21,255);
  
  
  
}  


int main (void)
{
    short int Xcount=0;
    short int Ycount=0;	
    unsigned int store[10]={4158,4728,4398,3518,2718,2968,3808,4648,4478,3638};
    short int T=0;
    unsigned int FQ=0;
    unsigned int HF=0;
    unsigned int LF=0;
    short int dotscol[2]={7,0};
      short int dottemp=0;
    short int pacsound=0;
    short int flash=1;
    unsigned int SSTART=1024;
    unsigned int JOYADDR=56320L; // port 1
    unsigned int JOYADDR2=56321L; // port 2  
    short int JOYREAD=0;
    short int JOYREAD2=0;  
    short int JOYEX=0;
    unsigned int score=0;
    unsigned int tempscore=0;
    unsigned int hiscore=0;
    short int dots=0;




    short int cherrycol=46;

  
    short int fruitsx=14;
    short int fruitsy=15;
    short int tempsprite=0;  
    short int sectemp=0;

  


    short int JUP1=254;
    short int JDOWN1=253;
    short int JLEFT1=251;
    short int JRIGHT1=247;
    short int JFIRE1=239;

    short int JUP=254;
    short int JDOWN=253;
    short int JLEFT=251;
    short int JRIGHT=247;
    short int JFIRE=239;
  
    short int JUP2=126;
    short int JDOWN2=125;
    short int JLEFT2=123;
    short int JRIGHT2=119;
    short int JFIRE2=111;	
    //int l;
    unsigned char *err="*";
    unsigned int dev;
    //unsigned char addr[2];
    unsigned char *filename = "sprite";
    unsigned char *filename2 = "pc3";
    unsigned char *filename3 = "pm3";	

    unsigned int scrchr=1024;

	

setupsprites();

	

	POKE(56578L,PEEK(56578L)|3);
	POKE(56576L,(PEEK(56576L)&252)|1);	// bank  = 1   address = 16384

     (void) textcolor (14);
    (void) bordercolor (COLOR_BLACK);
    (void) bgcolor (COLOR_BLACK);
  
  dev=1;
  
 

 clrscr(); 


     (void) textcolor (14);
    (void) bordercolor (COLOR_BLACK);
    (void) bgcolor (COLOR_BLACK);
	POKE(53272L,23);

  for(dev=0;dev<1024;dev++){
    POKE(charload+spritebase+dev,charData[dev]);
  } 
  
 
  
  POKE(53272L,(PEEK(53272L)&240)+12); // set charatcer set 12288 
  

  
  
  
  //for(dev=0;dev<960;dev++){
  //  POKE(1024+spritebase+dev+40,mapData[dev]);
  //} 
  

	
 
deadanim=0;
pacmode=0;
PACANIM=0;
PX=13;
PY=17;
PGX=(PX*8)+20;
PGY=(PY*8)+56;
PDIR=3;
					//collide=PEEK(53278);
POKE(V+21,255);

	//PDIR=5;
POKE(pacsprite,PACFRAMES[PDIR][PACANIM]);
POKE(eyesprite[0],EYEANIM[0]);
POKE(ghostsprite[0],GHOSTANIM[0]);
POKE(eyesprite[1],EYEANIM[1]);
POKE(ghostsprite[1],GHOSTANIM[1]);
POKE(eyesprite[2],EYEANIM[2]);
POKE(ghostsprite[2],GHOSTANIM[2]);
//POKE(fruitsprite,fcherry);
POKE(V+paccol,CYELLOW);
POKE(V+eyecol[0],CWHITE);
POKE(V+ghostcol[0],3);
POKE(V+eyecol[1],CWHITE);
POKE(V+ghostcol[1],4);
POKE(V+eyecol[2],CWHITE);
POKE(V+ghostcol[2],5);

POKE(V+cherrycol,CWHITE);

	PGX=(PX*8)+20;
	PGY=(PY*8)+56;
	GGX[0]=(GX[0]*8)+20; // draw ghost
	GGY[0]=(GY[0]*8)+56;
	GGX[1]=(GX[1]*8)+20; // draw ghost
	GGY[1]=(GY[1]*8)+56;
	GGX[2]=(GX[2]*8)+20; // draw ghost
	GGY[2]=(GY[2]*8)+56;
	
 
 
 drawintro();

 //printstatus(1); 
  
 paclife=0;
 drawlife(3);
  drawmap();  
 drawdots(7);
  

  
//startmusic();
pacsound=1;

POKE(M+14,140);  // voice 3 frequancy
POKE(M+18,16);  // voice 3 wave
POKE(M+24,143); // set volume and turn off voice 3
POKE(M+3,0);	// voice 1 pwn hi
POKE(M+2,192);  // voice 1 pwn low
POKE(M+6,240);  // voice 1 sr
POKE(M+5,15);   // voice 1 ad
POKE(M+4,65);   // voice 1 wave square


 sectemp=0; 
  
  
 //printstatus(0); 
	
while (JOYEX==0){
	if(paclife!=0){
		
// make waka waka sound
          
          if(pacsound!=0){
            if(pacsound==1){
              POKE(M+14,140);  // voice 3 frequancy
              POKE(M+18,16);  // voice 3 wave
              POKE(M+24,143); // set volume and turn off voice 3
              POKE(M+3,0);	// voice 1 pwn hi
              POKE(M+2,192);  // voice 1 pwn low
              POKE(M+6,240);  // voice 1 sr
              POKE(M+5,15);   // voice 1 ad
              POKE(M+4,65);   // voice 1 wave square
            }		
            FQ=store[pacsound-1];
            HF=(FQ/256);
            LF=FQ-(HF*256);
            //store[T]=FQ;
            POKE(M,LF);
            POKE(M+1,HF);
            pacsound+=2;
            if(pacsound>9){
              pacsound=0;
              POKE(M+4,64);
            }	
          }
		
		
// check ghost mode		

          for(Xcount=0;Xcount<3;Xcount++){
            if (GMODE[Xcount]==2){  		// if ghost = blue
              gtimer[Xcount]++;			// inc how long = blue
              if (gtimer[Xcount]>250){		// make flash as it gets to the end

                //if(gtimer[Xcount] %2==0){	// flash odd and even
                  POKE(V+ghostcol[Xcount],ghostflash[flashdot]);
                //} else {
                //  POKE(V+ghostcol[Xcount],1);                   
                //} 
              } 
              if (gtimer[Xcount]>300){		// end of blue timer
                gtimer[Xcount]=0;		// reset timer
                GMODE[Xcount]=TGMODE[Xcount];   // restore to mode before
                //GDIR[xcount]=1;
                GINC[Xcount]=TGINC[Xcount];	// restore speed to before
                POKE(V+ghostcol[Xcount],3+Xcount);	// reset colour
                bonuscount=0;				// reset bonus
                switch(Xcount){				// redraw ghost bodys.
                  case 0:
                    POKE(53269L,PEEK(53269L)|8);
                    break;
                  case 1:
                    POKE(53269L,PEEK(53269L)|16);
                    break;
                  case 2:
                    POKE(53269L,PEEK(53269L)|32);					
                    break;
                }
              }
            }
          }	

// read joystick
          
          
	JOYREAD=0;	
	JOYREAD=PEEK(JOYADDR); // check joystick	

 // check pacman collisions    and set ghost modes     
	
          if ((PXI==0)&&(PYI==0)){ 			// is pacman on 0 - 0 of a quare ?
            if (MAP[PY][PX]==46){ 			// check for points
              MAP[PY][PX]=99; 		// set dot to 99 so it can be reset later
              scrchr=colram+(PY*40)+(PX); 	// change colour ram to black
              POKE(scrchr,0);		
              score+=10; 			// inc score
              dots++; 			// 
              printscore(score,2);		// print score
              if(pacsound==0)	pacsound=1;	// if it's not making the waka sound start
            }

            if (MAP[PY][PX]==47){ 			// check for power pill
              score+=50;			// increase score
              dots++;				// increase dots
              MAP[PY][PX]=100;		// set dots to 100 so it can be reset
              scrchr=colram+(PY*40)+(PX);	// set colour to 0
              POKE(scrchr,0);	
              POKE(V+ghostcol[0],6);		// set all ghosts to black
              POKE(V+ghostcol[1],6);
              POKE(V+ghostcol[2],6);
              TGMODE[0]=GMODE[0];		// backup the current ghost mode	
              TGMODE[1]=GMODE[1];
              TGMODE[2]=GMODE[2];			
              GMODE[0]=2;// blue slow		// set ghost mode to eyes
              GMODE[1]=2;// blue slow
              GMODE[2]=2;// blue slow
              TGINC[0]=GINC[0];
              TGINC[1]=GINC[1];
              TGINC[2]=GINC[2];              
              GINC[0]=1;			// set ghost speed to 1
              GINC[1]=1;
              GINC[2]=1;
              gtimer[0]=0;			// set scared timer to 0
              gtimer[1]=0;
              gtimer[2]=0;
              POKE(53269L,255);		// display all sprites ?
              if(pacsound==0)	pacsound=1;
              //GINC[0]=1;
              //GINC[1]=1;
              //GINC[2]=1;
              //EYEANIM[0]=16;
              //EYEANIM[1]=16;
              //EYEANIM[2]=16;			
            }
            
     

		if(GMODE[0]==1){
			GMODE[0]=0;
			TGMODE[0]=0;			
			GINC[0]=2;
			GDIR[0]=3;
			GX[0]=14;
			GY[0]=7;
			GGX[0]=(GX[0]*8)+20; // draw ghost
			GGY[0]=(GY[0]*8)+56;	
                        GXI[0]=0;
                        GYI[0]=0;			
		}

		if ((dots>40)&&GMODE[1]==1){
			GMODE[1]=0;
			TGMODE[1]=0;			
			GINC[1]=2;
			GDIR[1]=3;
			GX[1]=14;
			GY[1]=7;
			GGX[1]=(GX[1]*8)+20; // draw ghost
			GGY[1]=(GY[1]*8)+56;
			GXI[1]=0;
			GYI[1]=0;
		}

		if ((dots>80)&&(GMODE[2]==1)){
                  	TGMODE[2]=GMODE[2];
			GMODE[2]=0;
			TGINC[2]=GINC[2];
                  	GINC[2]=2;
			GDIR[2]=3;
			GX[2]=14;
			GY[2]=7;
			GGX[2]=(GX[2]*8)+20; // draw ghost
			GGY[2]=(GY[2]*8)+56;
			GXI[2]=0;
			GYI[2]=0;

                }
            
            
// read joystick inputs            
            
            
            if ((JOYREAD&JUP)==JOYREAD ){// UP
              if (MAP[PY-1][PX]!=160){
                PDIR=0;
                if(pacmode==2)pacmode=0;
              }	
            } 
            if ((JOYREAD&JRIGHT)==JOYREAD){ // RIGHT
              if (MAP[PY][PX+1]!=160){
                PDIR=1;
                if(pacmode==2)pacmode=0;				
              }	
            }
            if ((JOYREAD&JDOWN)==JOYREAD){ // DOWN
              if (MAP[PY+1][PX]!=160){
                PDIR=2;
                if(pacmode==2)pacmode=0;				
              }	
            }	
            if ((JOYREAD&JLEFT)==JOYREAD){ // LEFT
              if (MAP[PY][PX-1]!=160){
                PDIR=3;
                if(pacmode==2)pacmode=0;				
              }	
            }
	}
          
          
// check if all dots are cleared          
          
          
        if (dots==206){
          stopmusic();          
          hiscore=score;
          printstatus(1); 
          deadanim=0;
          pacmode=0;
          PACANIM=0;
          PX=13;
          PY=17;
          PGX=(PX*8)+20;
          PGY=(PY*8)+56;
          PDIR=3;
          PXI=0;	
          drawdots(7);
          resetghost();
          startmusic();
          printstatus(0); 		
          POKE(V+21,255);
          dots=0;
          sectemp=0;
          level++;
          bonuscount=0;
        }	


	
	
// pacmode 0 = normal pacman move 	
	
	if(pacmode==0){
          if((PX==GX[0])&&(PY==GY[0])){ 			// ghost 0 collided gmode 0 = not blue
            if(GMODE[0]==0){			// normal pacman
              pacmode=1;			// set pacman = dead
              deadanim=0;			// start dead anim

            }
            if(GMODE[0]==2) {			// gmode 2 = blue
              GMODE[0]=3;			// set gmode 3 go ghome
              GINC[0]=2;			// set return homer speed	
              POKE(53269L,PEEK(53269L)&247);  // high ghost body so eyes only

              POKE(eyesprite[0],spritestart+19+bonuscount);  	// display bonus
              bonuscount++;					// inc bonus	
              if(bonuscount==1)score+=200;
              if(bonuscount==2)score+=400;
              if(bonuscount==3){
                score+=800;
                bonuscount=0;
              }  
              tempsprite=PEEK(V+21); 				// store all sprits
              POKE(V+21,1);	// 1
              //bigpause();
              ghostdead(bonuscount*1000);// delay need to add ghost dead sfx
              POKE(V+21,tempsprite);                          // return sprites to before
              //POKE(fruitsprite,fcherry);
              //POKE(V+fruitsx,GGX[0]);
              //POKE(V+fruitsy,GGY[0]);	
            }	

          }
          if((PX==GX[1])&&(PY==GY[1])){
            if(GMODE[1]==0){
              pacmode=1;	
              deadanim=0;

            }
            if(GMODE[1]==2) {
              GMODE[1]=3;
              GINC[1]=2;
              POKE(53269L,PEEK(53269L)&239);
              POKE(eyesprite[1],spritestart+19+bonuscount);
              bonuscount++;
              if(bonuscount==1)score+=200;
              if(bonuscount==2)score+=400;
              if(bonuscount==3){
                score+=800;
                bonuscount=0;
              }  
              tempsprite=PEEK(V+21);
              POKE(V+21,2); // 2
              //bigpause();
              ghostdead(bonuscount*1000);
              POKE(V+21,tempsprite);                        
              //POKE(fruitsprite,fcherry+1);
              //POKE(V+fruitsx,GGX[1]);
              //POKE(V+fruitsy,GGY[1]);				
            }				
          }
          if((PX==GX[2])&&(PY==GY[2])){
            if(GMODE[2]==0){
              pacmode=1;	
              deadanim=0;

            }
            if(GMODE[2]==2) {
              GMODE[2]=3;
              GINC[2]=2;				
              POKE(53269L,PEEK(53269L)&223);
              POKE(eyesprite[2],spritestart+19+bonuscount); 
              bonuscount++;
              if(bonuscount==1)score+=200;
              if(bonuscount==2)score+=400;
              if(bonuscount==3){
                score+=800;
                bonuscount=0;
              }                        
              tempsprite=PEEK(V+21);
              POKE(V+21,4);  // 4
              //bigpause();
              ghostdead(bonuscount*1000);
              POKE(V+21,tempsprite);                        

              //POKE(fruitsprite,fcherry=2);
              //POKE(V+fruitsx,GGX[2]);
              //POKE(V+fruitsy,GGY[2]);				
            }				
          }
	}		
	
	pacmove(); // check all 4 directions of pacman	
	

	
	
	
          if((sectemp<40)||(sectemp>80)){			// timer = scatter mode
            if(GMODE[0]==0) ghostmove(14,3,0,0);		// top section
            if(GMODE[1]==0) ghostmove(14,20,1,0);		// bottomo section
            if(GMODE[2]==0) ghostmove(14,10,2,0);		// middle section
POKE(V+eyecol[0],CWHITE);
POKE(V+eyecol[1],CWHITE);
POKE(V+eyecol[2],CWHITE);
          
          } else {
            if (GMODE[0]==0) POKE(V+eyecol[0],CYELLOW+flashdot);
            if (GMODE[1]==0) POKE(V+eyecol[1],CYELLOW+flashdot);
            if (GMODE[2]==0) POKE(V+eyecol[2],CYELLOW+flashdot);            
            if (GMODE[0]==2) POKE(V+eyecol[0],CWHITE);
            if (GMODE[1]==2) POKE(V+eyecol[1],CWHITE);
            if (GMODE[2]==2) POKE(V+eyecol[2],CWHITE);
            
            if(PDIR==0) if(GMODE[0]==0) ghostmove(PX,PY-3,0,0);

            if(PDIR==1)if(GMODE[0]==0) ghostmove(PX+3,PY,0,0);              

            if(PDIR==2) if(GMODE[0]==0) ghostmove(PX,PY+3,0,0);

            if(PDIR==3) if(GMODE[0]==0) ghostmove(PX-3,PY,0,0);


            if(PDIR==0)  if(GMODE[1]==0) ghostmove(PX,PY-1,1,0);

            if(PDIR==1)  if(GMODE[1]==0) ghostmove(PX+1,PY,1,0);

            if(PDIR==2) if(GMODE[1]==0) ghostmove(PX,PY+1,1,0);

            if(PDIR==3) if(GMODE[1]==0) ghostmove(PX-1,PY,1,0);





            if(GMODE[2]==0) ghostmove(PX,PY,2,0);  

          }          
          
	if(GMODE[0]==1) ghostmove(13,10,0,0);
	if(GMODE[0]==2) ghostmove(1,1,0,0);
	if(GMODE[0]>2) ghostmove(14,8,0,0);	
	
	
	if(GMODE[1]==1) ghostmove(15,10,1,0);	
	if(GMODE[1]==2) ghostmove(23,1,1,0);
	if(GMODE[1]>2) ghostmove(14,8,1,0);	
	
	if(GMODE[2]==1) ghostmove(13,10,2,0);		
	if(GMODE[2]==2) ghostmove(23,27,2,0);	
	if(GMODE[2]>2) ghostmove(14,8,2,0);		

	if(pacmode!=1){
		POKE(pacsprite,PACFRAMES[PDIR][PACANIM]);
	} else {
		pacdead();
          sectemp=0;
				
	}	
	POKE(eyesprite[0],EYEANIM[0]);
	POKE(ghostsprite[0],GHOSTANIM[0]);
	POKE(eyesprite[1],EYEANIM[1]);
	POKE(ghostsprite[1],GHOSTANIM[1]);
	POKE(eyesprite[2],EYEANIM[2]);
	POKE(ghostsprite[2],GHOSTANIM[2]);


	POKE(V+pacsx,PGX); // draw pacman
	POKE(V+pacsy,PGY);
	POKE(V+eyesx[0],GGX[0]); // draw pacman
	POKE(V+eyesy[0],GGY[0]);
	POKE(V+ghostsx[0],GGX[0]); // draw pacman
	POKE(V+ghostsy[0],GGY[0]);	
	POKE(V+eyesx[1],GGX[1]); // draw pacman
	POKE(V+eyesy[1],GGY[1]);
	POKE(V+ghostsx[1],GGX[1]); // draw pacman
	POKE(V+ghostsy[1],GGY[1]);	
	POKE(V+eyesx[2],GGX[2]); // draw pacman
	POKE(V+eyesy[2],GGY[2]);
	POKE(V+ghostsx[2],GGX[2]); // draw pacman
	POKE(V+ghostsy[2],GGY[2]);		
	

if(score!=tempscore){
  printscore(score,2);
  tempscore=score;
} 

dottemp++;           

if (dottemp>10){
  flashdot++;
  dottemp=0;
  sectemp++;
  if(sectemp>120){
    sectemp=0;
  }  
}
  
if(flashdot==2)flashdot=0;
          
       
if(MAP[2][1]==47){
  scrchr=colram+(2*40)+(1);
  POKE(scrchr,dotscol[flashdot]);	
}
if(MAP[2][26]==47){
  scrchr=colram+(2*40)+(26);
  POKE(scrchr,dotscol[flashdot]);	
} 
if(MAP[20][1]==47){
  scrchr=colram+(20*40)+(1);
  POKE(scrchr,dotscol[flashdot]);	
}
if(MAP[20][26]==47){
  scrchr=colram+(20*40)+(26);
  POKE(scrchr,dotscol[flashdot]);	
} 

  
} else {
          
dottemp++;           

if (dottemp>20){
  flashdot++;
  dottemp=0;
  sectemp++;
  if(sectemp>120){
    sectemp=0;
  }  
}
  
if(flashdot==2)flashdot=0;
          
       
  scrchr=colram+(2*40)+(1);
  POKE(scrchr,dotscol[flashdot]);	
  scrchr=colram+(2*40)+(26);
  POKE(scrchr,dotscol[flashdot]);	
  scrchr=colram+(20*40)+(1);
  POKE(scrchr,dotscol[flashdot]);	
  scrchr=colram+(20*40)+(26);
  POKE(scrchr,dotscol[flashdot]);	
           
	JOYREAD=0;
	JOYREAD2=0;          
	JOYREAD=PEEK(56321L); // check joystick
	JOYREAD2=PEEK(56320L); // check joystick  
	POKE(V+21,0);
      	(void) textcolor (2);
 	printstatus(2); 
          
	if ((JOYREAD==JFIRE1)||(JOYREAD2==JFIRE2)){ // fire exit
          if(JOYREAD==JFIRE1){
            JOYADDR=56321l;
            JUP=JUP1;
            JDOWN=JDOWN1;
            JLEFT=JLEFT1;
            JRIGHT=JRIGHT1;
            JFIRE=JFIRE1;
          }                  
          if(JOYREAD2==JFIRE2){
            JOYADDR=56320l;
            JUP=JUP2;
            JDOWN=JDOWN2;
            JLEFT=JLEFT2;
            JRIGHT=JRIGHT2;
            JFIRE=JFIRE2;
          } 
          	//if(JOYREAD2==239) JOYADDR=56320l;
          	hiscore=score;
        	printscore(hiscore,5);
                deadanim=0;
                pacmode=0;
                PACANIM=0;
                PX=13;
                PY=17;
                PGX=(PX*8)+20;
                PGY=(PY*8)+56;
                PDIR=3;
                PXI=0;	
		score=0;
		dots=0;
		paclife=3;
		drawdots(7);
		printstatus(1); 
		drawlife(paclife); 
		//startmusic();
		resetghost();
		POKE(V+21,255);
          	level=0;
 		printstatus(0); 
                bonuscount=0;
	}
}
  
}		
    /* Done */
    return EXIT_SUCCESS;
}




